{"version":3,"file":"react-query-api.esm.js","sources":["../src/db.ts","../src/handlers.ts","../src/index.ts"],"sourcesContent":["import { Issue, Label, User } from \"./types\";\n\nexport let users: User[] = [\n  {\n    id: \"u_1\",\n    name: \"Tyler\",\n    profilePictureUrl:\n      \"https://pbs.twimg.com/profile_images/1428205319616798721/xmr7q976_400x400.jpg\",\n  },\n  {\n    id: \"u_2\",\n    name: \"Bono\",\n    profilePictureUrl:\n      \"https://pbs.twimg.com/profile_images/1384860221110095873/f8s_E6a6_400x400.jpg\",\n  },\n  {\n    id: \"u_3\",\n    name: \"Tanner\",\n    profilePictureUrl:\n      \"https://pbs.twimg.com/profile_images/1164219021283094530/ACRln2kL_400x400.jpg\",\n  },\n  {\n    id: \"u_4\",\n    name: \"Alex\",\n    profilePictureUrl:\n      \"https://pbs.twimg.com/profile_images/1403026826075779075/cHtraFgQ_400x400.jpg\",\n  },\n];\n\nexport let labels: Label[] = [\n  { id: \"l_1\", color: \"red\", name: \"bug\" },\n  { id: \"l_2\", color: \"blue\", name: \"feature\" },\n  { id: \"l_3\", color: \"cyan\", name: \"enhancement\" },\n  { id: \"l_4\", color: \"orange\", name: \"question\" },\n  { id: \"l_5\", color: \"lime\", name: \"help wanted\" },\n  { id: \"l_6\", color: \"white\", name: \"wontfix\" },\n  { id: \"l_7\", color: \"rebeccapurple\", name: \"duplicate\" },\n  { id: \"l_8\", color: \"yellow\", name: \"help-wanted\" },\n];\n\nconst templateIssues = [\n  \"Dependencies need to be updated\",\n  \"Poor performance on Windows devices\",\n  \"Poor performance on macOS devices\",\n  \"Poor performance on Android devices\",\n  \"Holding down the space bar causes the processor to heat up\",\n  `Error: \"Cannot read property 'length' of undefined\"`,\n  \"The app is crashing on iOS devices\",\n  \"How am I supposed to create new tasks?\",\n  \"Styling on the profile page looks weird.\",\n  \"Feature: Build out multiplayer connectivity\",\n  \"Feature: Build out a leaderboard\",\n];\n\nconst templateIssueComments = [\n  \"I'm on it!\",\n  \"I'm not sure what the problem is.\",\n  \"I'm working on it.\",\n  \"I'm not sure how to fix it.\",\n  \"I'm not sure if I can reproduce the problem.\",\n  \"This is a really big deal for me.\",\n  \"Has there been any progress on this?\",\n  \"What is the status of this issue?\",\n  \"Never mind, I figured out how to fix this\",\n  \"Can you send me a little bit more information about the problem.\",\n  \"I've reproduced this issue. Working on a fix now.\",\n  \"I'm on it. I'll get back to you when I'm done.\",\n  \"It would seem this is caused by user error.\",\n  \"Whoops, I just dropped the production database. Hang on...\",\n];\n\nconst allStatus: (\"backlog\" | \"todo\" | \"inProgress\" | \"done\" | \"cancelled\")[] =\n  [\"backlog\", \"todo\", \"inProgress\", \"done\", \"cancelled\"];\n\nexport const issues: Issue[] = Array.from({ length: 100 }, (_, i) => {\n  const isCompleted = Math.random() > 0.9;\n  return {\n    id: `i_${i}`,\n    title: templateIssues[Math.floor(Math.random() * templateIssues.length)],\n    labels: [labels[Math.floor(Math.random() * labels.length)]],\n    comments: Array.from(\n      { length: Math.floor(Math.random() * 10) + 1 },\n      (_, j) => ({\n        id: `c_${i}_${j}`,\n        createdDate: new Date(Date.now() - Math.floor(Math.random() * 100000)),\n        createdBy: users[Math.floor(Math.random() * users.length)],\n        issueId: `i_${i}`,\n        user: users[Math.floor(Math.random() * users.length)],\n        comment:\n          templateIssueComments[\n            Math.floor(Math.random() * templateIssueComments.length)\n          ],\n      })\n    ),\n    number: i + 1,\n    status: isCompleted\n      ? \"done\"\n      : allStatus.filter((f) => f !== \"done\")[\n          Math.floor(Math.random() * allStatus.length)\n        ],\n    createdDate: new Date(Date.now() - Math.floor(Math.random() * 10000000000)),\n    createdBy: users[Math.floor(Math.random() * users.length)],\n    assignee:\n      Math.random() > 0.5\n        ? users[Math.floor(Math.random() * users.length)]\n        : null,\n    dueDate:\n      Math.random() > 0.5\n        ? new Date(Date.now() + Math.floor(Math.random() * 10000000))\n        : null,\n    completedDate: isCompleted\n      ? new Date(Date.now() + Math.floor(Math.random() * 10000000))\n      : null,\n  };\n});\n","import { rest } from 'msw';\nimport { issues, labels, users } from './db';\nimport { Issue, IssueComment } from './types';\n\nexport const handlers = [\n  rest.get('/api/issues', (req, res, ctx) => {\n    const query = req.url.searchParams;\n    const page = Number(query.get('page')) || 1;\n    const perPage = Number(query.get('limit')) || 10;\n    const statusFilter = query.get('status') as\n      | 'backlog'\n      | 'todo'\n      | 'inProgress'\n      | 'done'\n      | 'cancelled'\n      | null;\n    const labels = query.getAll('labels[]');\n    const order = query.get('order') || 'desc';\n    const filteredIssues = issues.filter(issue => {\n      if (statusFilter) {\n        if (issue.status !== statusFilter) return false;\n      } else {\n        if (issue.status === 'done' || issue.status === 'cancelled')\n          return false;\n      }\n      if (labels.length > 0) {\n        if (\n          !labels.some(label => {\n            return issue.labels.find(l => l.name === label);\n          })\n        ) {\n          return false;\n        }\n      }\n      return true;\n    });\n    const sortedIssues = filteredIssues.sort((a, b) => {\n      if (order === 'asc') {\n        if (a.number < b.number) return -1;\n        if (a.number > b.number) return 1;\n        return 0;\n      } else {\n        if (a.number < b.number) return 1;\n        if (a.number > b.number) return -1;\n        return 0;\n      }\n    });\n    const pagedIssues = sortedIssues.slice(\n      (page - 1) * perPage,\n      page * perPage\n    );\n    return res(ctx.status(200), ctx.json(pagedIssues));\n  }),\n  rest.get('/api/issues/:number', (req, res, ctx) => {\n    const number = Number(req.params.number);\n    const issue = issues.find(issue => issue.number === number);\n    if (!issue) {\n      return res(ctx.status(404), ctx.json({ message: 'Not found' }));\n    }\n    return res(ctx.status(200), ctx.json(issue));\n  }),\n  rest.get('/api/issues/:number/comments', (req, res, ctx) => {\n    const number = Number(req.params.number);\n    const issue = issues.find(issue => issue.number === number);\n    if (!issue) {\n      return res(ctx.status(404), ctx.json({ message: 'Not found' }));\n    }\n    return res(ctx.status(200), ctx.json(issue.comments));\n  }),\n  rest.post<string>('/api/issues/:number/comments', (req, res, ctx) => {\n    const number = Number(req.params.number);\n    const issue = issues.find(issue => issue.number === number);\n    if (!issue) {\n      return res(ctx.status(404), ctx.json({ message: 'Not found' }));\n    }\n    const body: { createdBy_id: string; comment: string } = JSON.parse(\n      req.body\n    );\n    const createdBy = users.find(user => user.id === body.createdBy_id);\n    if (!createdBy) {\n      return res(ctx.status(400), ctx.json({ message: 'Not found' }));\n    }\n    const comment: IssueComment = {\n      id: `c_${issue.id}_${issue.comments.length + 1}`,\n      issueId: issue.id,\n      createdDate: new Date(),\n      createdBy,\n      comment: body.comment,\n    };\n\n    issue.comments.push(comment);\n    return res(ctx.status(201), ctx.json(comment));\n  }),\n  rest.put<string>('/api/issues/:number', (req, res, ctx) => {\n    const number = Number(req.params.number);\n    const issue = issues.find(issue => issue.number === number);\n    if (!issue) {\n      return res(ctx.status(404), ctx.json({ message: 'Not found' }));\n    }\n    const body = JSON.parse(req.body);\n\n    if (body.title) {\n      issue.title = body.title;\n    }\n    if (body.status) {\n      issue.status = body.status;\n    }\n    if (body.labels) {\n      issue.labels = body.labels.map((l: string) =>\n        labels.find(lbl => lbl.name === l)\n      );\n    }\n    if (body.dueDate) {\n      issue.dueDate = body.dueDate;\n    }\n    if (body.assignee) {\n      issue.assignee = users.find(user => user.id === body.assignee) || null;\n    }\n\n    return res(ctx.status(200), ctx.json(issue));\n  }),\n  rest.post<string>('/api/issues/:number/complete', (req, res, ctx) => {\n    const number = Number(req.params.number);\n    const issue = issues.find(issue => issue.number === number);\n    if (!issue) {\n      return res(ctx.status(404), ctx.json({ message: 'Not found' }));\n    }\n\n    issue.createdDate = new Date();\n    issue.status = 'done';\n\n    return res(ctx.status(200), ctx.json(issue));\n  }),\n  rest.post<string>('/api/issues', (req, res, ctx) => {\n    const body = JSON.parse(req.body);\n    const number = issues.length + 1;\n    const issue: Issue = {\n      id: `i_${number}`,\n      number,\n      title: body.title,\n      status: 'backlog',\n      comments: [\n        {\n          issueId: `i_${number}`,\n          id: `c_${number}_1`,\n          createdDate: new Date(),\n          createdBy: users[Math.floor(Math.random() * users.length)],\n          comment: body.comment,\n        },\n      ],\n      createdDate: new Date(),\n      createdBy: users[Math.floor(Math.random() * users.length)],\n      dueDate: null,\n      completedDate: null,\n      assignee: null,\n      labels: [],\n    };\n\n    issues.push(issue);\n    return res(ctx.status(201), ctx.json(issue));\n  }),\n\n  rest.get('/api/labels', (_req, res, ctx) => {\n    return res(ctx.status(200), ctx.json(labels));\n  }),\n  rest.get('/api/labels/:labelId', (req, res, ctx) => {\n    const { labelId } = req.params;\n\n    const label = labels.find(l => l.name === labelId);\n    if (!label) {\n      return res(ctx.status(404), ctx.json({ message: 'Label not found' }));\n    }\n    return res(ctx.status(200), ctx.json(label));\n  }),\n  rest.post('/api/labels', (req, res, ctx) => {\n    if (!req.body || typeof req.body !== 'string') {\n      return res(ctx.status(400), ctx.json({ message: 'No body' }));\n    }\n    const parsedBody = JSON.parse(req.body);\n    if (!parsedBody.name) {\n      return res(ctx.status(400), ctx.json({ message: 'No name' }));\n    }\n    const label = {\n      id: `l_${labels.length + 1}`,\n      name: parsedBody.name,\n      color: parsedBody.color || 'red',\n    };\n    labels.push(label);\n    return res(ctx.status(200), ctx.json(label));\n  }),\n  rest.put('/api/labels/:labelId', (req, res, ctx) => {\n    const { labelId } = req.params;\n    const label = labels.find(l => l.name === labelId);\n    if (!label) {\n      return res(ctx.status(404), ctx.json({ message: 'Label not found' }));\n    }\n    if (!req.body || typeof req.body !== 'string') {\n      return res(ctx.status(400), ctx.json({ message: 'No body' }));\n    }\n    const parsedBody = JSON.parse(req.body);\n    if (!parsedBody.name) {\n      return res(ctx.status(400), ctx.json({ message: 'No name' }));\n    }\n    if (parsedBody.name) {\n      label.name = parsedBody.name;\n    }\n    if (parsedBody.color) {\n      label.color = parsedBody.color;\n    }\n    return res(ctx.status(200), ctx.json(label));\n  }),\n  rest.delete('/api/labels/:labelId', (req, res, ctx) => {\n    const { labelId } = req.params;\n    const label = labels.find(l => l.name === labelId);\n    if (!label) {\n      return res(ctx.status(404), ctx.json({ message: 'Label not found' }));\n    }\n    labels.splice(labels.indexOf(label), 1);\n    return res(ctx.status(200), ctx.json(labels));\n  }),\n\n  rest.get('/api/users', (_req, res, ctx) => {\n    return res(ctx.status(200), ctx.json(users));\n  }),\n];\n","import { setupWorker } from \"msw\";\nimport { handlers } from \"./handlers\";\n\n// This configures a Service Worker with the given request handlers.\nexport const worker = setupWorker(...handlers);\n"],"names":["users","id","name","profilePictureUrl","labels","color","templateIssues","templateIssueComments","allStatus","issues","Array","from","length","_","i","isCompleted","Math","random","title","floor","comments","j","createdDate","Date","now","createdBy","issueId","user","comment","number","status","filter","f","assignee","dueDate","completedDate","handlers","rest","get","req","res","ctx","query","url","searchParams","page","Number","perPage","statusFilter","getAll","order","filteredIssues","issue","some","label","find","l","sortedIssues","sort","a","b","pagedIssues","slice","json","params","message","post","body","JSON","parse","createdBy_id","push","put","map","lbl","_req","labelId","parsedBody","splice","indexOf","worker","setupWorker"],"mappings":"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"}